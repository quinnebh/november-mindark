@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300..900&family=Space+Grotesk:wght@400..700&display=swap");
@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Tailwind v4 Theme Tokens */
@theme {
    /* Fonts */
    --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
    --font-display: "Space Grotesk", "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;

    /* Brand */
    --color-brand: 117 46 79; /* #752E4F */
    --color-brand-50: 252 245 248;
    --color-brand-100: 248 234 240;
    --color-brand-200: 240 209 221;
    --color-brand-300: 226 172 197;
    --color-brand-400: 206 126 165;
    --color-brand-500: 179 83 130;
    --color-brand-600: 147 62 106;
    --color-brand-700: 117 46 79;
    --color-brand-800: 92 34 61;
    --color-brand-900: 66 24 44;

    /* Dark neutral scale (ink) */
    --color-ink-50: 214 218 226;  /* text subtle on light cards */
    --color-ink-100: 166 172 184;
    --color-ink-200: 120 128 144;
    --color-ink-300: 90 96 112;
    --color-ink-400: 62 68 84;
    --color-ink-500: 42 46 60;
    --color-ink-600: 32 35 46;
    --color-ink-700: 24 26 34;
    --color-ink-800: 16 18 24;
    --color-ink-900: 10 11 15;
    --color-ink-950: 6 6 10;

    /* Semantic surface and text */
    --color-bg: var(--color-ink-900);
    --color-bg-elev-1: var(--color-ink-800);
    --color-bg-elev-2: 20 22 30;
    --color-surface: var(--color-ink-800);
    --color-surface-2: 22 24 32;

    --color-text-primary: 236 240 244;
    --color-text-secondary: 198 205 216;
    --color-text-muted: 156 166 184;

    --color-border: 255 255 255; /* used with opacity */
    --color-border-strong: 255 255 255;

    /* Radii - sharp, minimal */
    --radius-xs: 6px;
    --radius-sm: 8px;
    --radius-md: 10px;
    --radius-lg: 12px;

    /* Blurs for glassmorphism */
    --blur-xs: 2px;
    --blur-sm: 4px;
    --blur-md: 8px;
    --blur-lg: 12px;
    --blur-xl: 20px;

    /* Shadows */
    --shadow-glass: 0 1px 0 0 rgb(255 255 255 / 0.04) inset, 0 8px 24px rgb(0 0 0 / 0.45);
    --shadow-soft: 0 10px 30px -10px rgb(0 0 0 / 0.45);

    /* Timing + Easing */
    --ease-smooth: cubic-bezier(0.22, 1, 0.36, 1);
    --ease-emphasized: cubic-bezier(0.2, 0, 0, 1);
    --duration-quick: 140ms;
    --duration-smooth: 220ms;

    /* Sizing for hero typography */
    --text-hero-min: 3rem;   /* 48px */
    --text-hero-max: 4.5rem; /* 72px */
}

/* Base setup */
:root {
    color-scheme: dark;
}

html {
    @apply antialiased;
    scroll-behavior: smooth;
    background-color: rgb(var(--color-ink-900));
}

body {
    font-family: var(--font-sans);
    color: rgb(var(--color-text-primary));
    background:
        radial-gradient(1200px 600px at 85% 10%, rgb(var(--color-brand) / 0.08), transparent 60%),
        radial-gradient(800px 400px at 10% 10%, rgb(168 85 247 / 0.06), transparent 60%),
        linear-gradient(180deg, rgb(var(--color-ink-900)), rgb(var(--color-ink-950)));
    min-height: 100vh;
    text-rendering: optimizeLegibility;
}

::selection {
    background-color: rgb(var(--color-brand) / 0.35);
    color: rgb(255 255 255);
}

/* Scrollbar (WebKit) */
*::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}
*::-webkit-scrollbar-track {
    background: rgb(var(--color-ink-900));
}
*::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgb(var(--color-ink-600)), rgb(var(--color-ink-700)));
    border: 2px solid rgb(var(--color-ink-900));
    border-radius: 9999px;
}
*::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, rgb(var(--color-ink-500)), rgb(var(--color-ink-600)));
}

/* Typography plugin tweaks */
@layer components {
    .prose {
        color: rgb(var(--color-text-secondary));
        max-width: 75ch;
    }
    .prose :where(h1, h2, h3, h4) {
        color: rgb(var(--color-text-primary));
        letter-spacing: -0.015em;
    }
    .prose :where(code) {
        background: rgb(255 255 255 / 0.06);
        border: 1px solid rgb(255 255 255 / 0.08);
        border-radius: var(--radius-xs);
        padding: 0.125rem 0.375rem;
    }
    .prose :where(a) {
        color: rgb(var(--color-brand));
        text-decoration: none;
        border-bottom: 1px solid rgb(var(--color-brand) / 0.4);
        transition: color var(--duration-quick) var(--ease-smooth), border-color var(--duration-quick) var(--ease-smooth);
    }
    .prose :where(a:hover) {
        color: rgb(var(--color-brand-400));
        border-color: rgb(var(--color-brand-400));
    }
}

/* Utilities */

/* Backdrop blur granular utilities */
@utility backdrop-blur-xs {
    -webkit-backdrop-filter: blur(var(--blur-xs));
    backdrop-filter: blur(var(--blur-xs));
}

/* Hairline border */
@utility hairline {
    border-width: 1px;
    border-color: rgb(var(--color-border) / 0.08);
    border-style: solid;
}

/* Stronger border (for focused elements) */
@utility border-strong {
    border-width: 1px;
    border-color: rgb(var(--color-border-strong) / 0.16);
    border-style: solid;
}

/* Brand border accent (thin, non-CTA highlight) */
@utility brand-border {
    border-width: 1px;
    border-color: rgb(var(--color-brand) / 0.45);
    border-style: solid;
}

/* Glass surfaces */
@utility glass {
    background: linear-gradient(180deg, rgb(255 255 255 / 0.06), rgb(255 255 255 / 0.03));
    -webkit-backdrop-filter: blur(var(--blur-md));
    backdrop-filter: blur(var(--blur-md));
    border: 1px solid rgb(255 255 255 / 0.08);
    box-shadow: var(--shadow-glass);
    border-radius: var(--radius-sm);
}

@utility glass-strong {
    background: linear-gradient(180deg, rgb(255 255 255 / 0.10), rgb(255 255 255 / 0.04));
    -webkit-backdrop-filter: blur(var(--blur-lg));
    backdrop-filter: blur(var(--blur-lg));
    border: 1px solid rgb(255 255 255 / 0.12);
    box-shadow: var(--shadow-soft);
    border-radius: var(--radius-md);
}

/* App gradient backgrounds */
@utility bg-page {
    background:
        radial-gradient(1200px 600px at 85% 10%, rgb(var(--color-brand) / 0.08), transparent 60%),
        radial-gradient(800px 400px at 10% 10%, rgb(168 85 247 / 0.06), transparent 60%),
        linear-gradient(180deg, rgb(var(--color-ink-900)), rgb(var(--color-ink-950)));
}

@utility bg-section {
    background:
        linear-gradient(180deg, rgb(var(--color-ink-900)), transparent 40%),
        linear-gradient(180deg, rgb(var(--color-ink-900)), rgb(var(--color-ink-950)));
}

/* Headline gradient text */
@utility headline-gradient {
    background-image: linear-gradient(90deg,
        rgb(var(--color-brand)) 0%,
        rgb(192 94 138) 50%,
        rgb(236 72 153) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

/* Hero typography */
@utility text-hero {
    font-family: var(--font-display);
    font-weight: 800;
    font-size: clamp(var(--text-hero-min), 7vw, var(--text-hero-max));
    line-height: 0.98;
    letter-spacing: -0.02em;
}

@utility text-subtitle {
    font-size: clamp(1rem, 2.4vw, 1.25rem);
    line-height: 1.4;
    color: rgb(var(--color-text-secondary));
}

@utility text-caption {
    font-size: 0.8125rem;
    line-height: 1.35;
    color: rgb(var(--color-text-muted));
}

@utility text-eyebrow {
    text-transform: uppercase;
    letter-spacing: 0.16em;
    font-size: 0.75rem;
    color: rgb(var(--color-text-muted));
}

/* Focus ring */
@utility focus-ring {
    outline: none;
    box-shadow: 0 0 0 0.5px rgb(255 255 255 / 0.18), 0 0 0 6px rgb(var(--color-brand) / 0.22);
}

/* CTA background (brand used sparingly) */
@utility cta-bg {
    background: linear-gradient(180deg, rgb(var(--color-brand) / 0.98), rgb(var(--color-brand-700)));
    color: rgb(255 255 255);
}

/* Graph surfaces (dark glass) */
@utility graph-surface {
    background:
        linear-gradient(180deg, rgb(255 255 255 / 0.05), rgb(255 255 255 / 0.02));
    -webkit-backdrop-filter: blur(var(--blur-sm));
    backdrop-filter: blur(var(--blur-sm));
    border: 1px solid rgb(255 255 255 / 0.08);
    border-radius: var(--radius-sm);
}

@utility graph-accent {
    background:
        radial-gradient(600px 200px at 20% 10%, rgb(var(--color-brand) / 0.10), transparent 60%),
        linear-gradient(180deg, rgb(255 255 255 / 0.05), rgb(255 255 255 / 0.02));
    border: 1px solid rgb(var(--color-brand) / 0.35);
}

/* Video frame motif: square with a circle inside */
@utility hero-frame {
    position: relative;
    border-radius: var(--radius-sm);
    border: 1px solid rgb(255 255 255 / 0.10);
    background: linear-gradient(180deg, rgb(255 255 255 / 0.04), rgb(255 255 255 / 0.02));
    -webkit-backdrop-filter: blur(var(--blur-sm));
    backdrop-filter: blur(var(--blur-sm));
    overflow: hidden;
}

/* Apply a soft circular motif via mask (component adds the pseudo) */
@layer components {
    .hero-frame::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        background:
            radial-gradient(400px 400px at 70% 50%, rgb(255 255 255 / 0.07), transparent 60%);
        mix-blend-mode: overlay;
    }
}

/* Hero overlay gradient for text legibility */
@utility hero-overlay {
    background: linear-gradient(90deg, rgb(0 0 0 / 0.65), rgb(0 0 0 / 0.25) 35%, transparent 65%);
}

/* Buttons */
@utility btn-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding-inline: 1rem;
    padding-block: 0.625rem;
    border-radius: var(--radius-sm);
    font-weight: 600;
    letter-spacing: -0.005em;
    line-height: 1.1;
    transition: transform var(--duration-quick) var(--ease-smooth), box-shadow var(--duration-quick) var(--ease-smooth), background var(--duration-quick) var(--ease-smooth), border-color var(--duration-quick) var(--ease-smooth), color var(--duration-quick) var(--ease-smooth);
    border: 1px solid transparent;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;
}

@utility btn-ghost {
    background: linear-gradient(180deg, rgb(255 255 255 / 0.05), rgb(255 255 255 / 0.02));
    border-color: rgb(var(--color-brand) / 0.45);
    color: rgb(var(--color-text-primary));
}

@utility btn-primary {
    background: linear-gradient(180deg, rgb(var(--color-brand)), rgb(var(--color-brand-700)));
    color: rgb(255 255 255);
    border-color: rgb(var(--color-brand) / 0.6);
    box-shadow: 0 6px 20px -6px rgb(var(--color-brand) / 0.55);
}

@utility btn-muted {
    background: linear-gradient(180deg, rgb(255 255 255 / 0.05), rgb(255 255 255 / 0.02));
    color: rgb(var(--color-text-primary));
    border-color: rgb(255 255 255 / 0.10);
}

@utility btn-disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Button components with hover/active/focus behaviors */
@layer components {
    .btn { @apply btn-base; }
    .btn--primary { @apply btn-primary; }
    .btn--secondary { @apply btn-ghost; }
    .btn--muted { @apply btn-muted; }
    .btn:focus-visible { @apply focus-ring; }
    .btn--primary:hover { filter: brightness(1.04); transform: translateY(-1px); }
    .btn--primary:active { transform: translateY(0); filter: brightness(0.98); }
    .btn--secondary:hover { border-color: rgb(var(--color-brand) / 0.7); transform: translateY(-1px); }
    .btn--secondary:active { transform: translateY(0); }
    .btn--muted:hover { border-color: rgb(255 255 255 / 0.16); transform: translateY(-1px); }
    .btn--muted:active { transform: translateY(0); }
    .btn:disabled, .btn[aria-disabled="true"] { @apply btn-disabled; }

    /* Shimmer overlay for primary CTA */
    .btn--primary {
        position: relative;
        overflow: hidden;
        isolation: isolate;
    }
    .btn--primary::after {
        content: "";
        position: absolute;
        inset: -100% -30%;
        background: linear-gradient(115deg, transparent 30%, rgb(255 255 255 / 0.35) 45%, transparent 60%);
        transform: translateX(-20%);
        transition: transform 600ms var(--ease-smooth);
        opacity: 0.75;
        pointer-events: none;
        mix-blend-mode: screen;
    }
    .btn--primary:hover::after {
        transform: translateX(20%);
    }
}

/* Cards & Surfaces */
@utility card-base {
    border-radius: var(--radius-sm);
    border: 1px solid rgb(255 255 255 / 0.08);
    background: linear-gradient(180deg, rgb(255 255 255 / 0.06), rgb(255 255 255 / 0.03));
    -webkit-backdrop-filter: blur(var(--blur-sm));
    backdrop-filter: blur(var(--blur-sm));
    box-shadow: var(--shadow-glass);
}

@layer components {
    .card { @apply card-base; }
    .card--accent { @apply card-base; border-color: rgb(var(--color-brand) / 0.35); }
    .card--ghost { background: linear-gradient(180deg, rgb(255 255 255 / 0.03), transparent); }
}

/* Metrics and graph helpers */
@layer components {
    .metric {
        display: inline-flex;
        align-items: baseline;
        gap: 0.25rem;
        color: rgb(var(--color-text-primary));
        letter-spacing: -0.015em;
    }
    .metric .metric__value {
        font-family: var(--font-display);
        font-weight: 700;
        font-size: clamp(1.5rem, 4vw, 2.25rem);
        line-height: 1;
    }
    .metric .metric__label {
        color: rgb(var(--color-text-muted));
        font-size: 0.85rem;
    }
}

/* Animations */
@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
    100% { transform: translateY(0px); }
}

@keyframes float-lg {
    0% { transform: translateY(0px) translateX(0px); }
    50% { transform: translateY(-10px) translateX(2px); }
    100% { transform: translateY(0px) translateX(0px); }
}

@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

@utility animate-float {
    animation: float 6s var(--ease-smooth) infinite;
}

@utility animate-float-lg {
    animation: float-lg 8s var(--ease-smooth) infinite;
}

/* Shimmer background utility (for loading placeholders) */
@utility shimmer {
    background-image: linear-gradient(90deg, rgb(255 255 255 / 0.06), rgb(255 255 255 / 0.12), rgb(255 255 255 / 0.06));
    background-size: 200% 100%;
    animation: shimmer 1.6s linear infinite;
}

/* Section spacing */
@utility section-y {
    padding-block: clamp(3rem, 8vw, 6rem);
}

/* Layout helpers for fullpage/no-margins modes */
@layer components {
    .layout--fullpage {
        padding: 0 !important;
        margin: 0 !important;
        width: 100%;
        min-height: 100dvh;
    }
    .layout--no-margins {
        padding: 0 !important;
        margin: 0 !important;
        width: 100%;
    }
}

/* Hero video styles */
@layer components {
    .hero-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    .hero-video__overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, rgb(0 0 0 / 0.68), rgb(0 0 0 / 0.32) 30%, transparent 65%);
        pointer-events: none;
    }
    .hero-video__frame { @apply hero-frame; }
}

/* Links */
@utility link-underline {
    position: relative;
    text-decoration: none;
    border-bottom: 1px solid rgb(255 255 255 / 0.14);
}

@layer components {
    .link {
        color: rgb(var(--color-text-primary));
        transition: color var(--duration-quick) var(--ease-smooth), border-color var(--duration-quick) var(--ease-smooth);
    }
    .link:hover {
        color: rgb(var(--color-brand));
        border-color: rgb(var(--color-brand));
    }
}

/* Inputs (minimal, glassy) */
@utility input-base {
    width: 100%;
    background: linear-gradient(180deg, rgb(255 255 255 / 0.05), rgb(255 255 255 / 0.02));
    border: 1px solid rgb(255 255 255 / 0.10);
    border-radius: var(--radius-sm);
    padding: 0.625rem 0.75rem;
    color: rgb(var(--color-text-primary));
    transition: border-color var(--duration-quick) var(--ease-smooth), box-shadow var(--duration-quick) var(--ease-smooth), background var(--duration-quick) var(--ease-smooth);
}

@utility input-invalid {
    border-color: rgb(244 63 94 / 0.6);
}

@layer components {
    .input { @apply input-base; }
    .input:focus { @apply border-strong; box-shadow: 0 0 0 6px rgb(var(--color-brand) / 0.18); outline: none; }
    .input::placeholder { color: rgb(var(--color-text-muted)); }
    .input--invalid { @apply input-invalid; }
}

/* Section dividers */
@utility divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgb(255 255 255 / 0.10), transparent);
}

/* CTA section styles */
@layer components {
    .cta {
        @apply glass-strong;
        background:
            linear-gradient(180deg, rgb(var(--color-brand) / 0.10), rgb(255 255 255 / 0.04)),
            linear-gradient(180deg, rgb(255 255 255 / 0.06), rgb(255 255 255 / 0.03));
        border-color: rgb(var(--color-brand) / 0.35);
    }
}

/* Accent ticks/grid for charts (subtle) */
@utility grid-ticks {
    background-image:
        linear-gradient(to right, rgb(255 255 255 / 0.045) 1px, transparent 1px),
        linear-gradient(to bottom, rgb(255 255 255 / 0.045) 1px, transparent 1px);
    background-size: 32px 32px, 32px 32px;
}

/* Subtle brand glow (thin border only, not fill) */
@utility brand-glow {
    box-shadow: 0 0 0 1px rgb(var(--color-brand) / 0.45), 0 0 40px -20px rgb(var(--color-brand) / 0.6);
    border-radius: inherit;
}

/* Page-width container */
@utility container-page {
    width: 100%;
    max-width: 1200px;
    margin-inline: auto;
    padding-inline: clamp(1rem, 4vw, 2rem);
}

/* Accessibility helpers */
@layer components {
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0,0,0,0);
        white-space: nowrap;
        border-width: 0;
    }
}

/* Specific section helpers for anchors */
@utility section-anchor {
    scroll-margin-top: 96px;
}

/* Footer tone */
@layer components {
    .footer {
        background: linear-gradient(180deg, rgb(var(--color-ink-900)), rgb(var(--color-ink-950)));
        border-top: 1px solid rgb(255 255 255 / 0.08);
    }
    .footer a {
        color: rgb(var(--color-text-secondary));
    }
    .footer a:hover {
        color: rgb(var(--color-brand));
    }
}