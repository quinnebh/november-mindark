@import std://make.convo
@import ./context/vars.convo

> define
codingModel='gpt-5'
imageGenModel='open-router/google/gemini-2.5-flash-image-preview'

Screen=struct(

    # User friendly name of the screen
    name:string

    # Route within the pages directory of a NextJS app. Route parameters should use square brackets
    # and should NOT include a file extension.
    #
    # - Example of route to profile page: profile
    # - Example of a route to a task detail page: task/[taskId]
    route:string
    
    # A short description of the screen
    description:string
)

Component=struct(
    # TypeScript name of the component
    name:string;
    # A short description of the component
    description:string;
    # A TypeScript interface describing the props of the component.
    propsInterface:string;

    # Example of how to import the components - import { COMPONENT_NAME } from "@/components/COMPONENT_NAME"
    import:string;
)

> app makeApp
    name:appName
    port:appPort
    dir:appDir
    httpRoot:appHttpRoot

> stage docs-assets
    model: codingModel

> target app-description
    context: array(
        {path: 'context/app.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: 'context/style.md' tag:'styling'}
        {path: '.editorconfig' tag:'editor-config'}
    )
    out: 'docs/app-description.md'
    ===
    Generate a detailed description of the {{appName}} landing page using the content in the `app-description`
    and `screen` tags in markdown format. Use H2 and H3 headers to separate sections and
    subsections.
    
    Include the following:
    - List of features
    - List of sections with a description and route.
    ===

> target tailwinds
    context: array(
        {path: 'docs/app-description.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: 'context/style.md' tag:'styling'}
        {path: 'context/tailwind.md' tag:'tailwind-rules'}
        {path: '.editorconfig' tag:'editor-config'}
    )
    out: 'styles/globals.css'
    ===
    Generate a Tailwinds v4 theme.
    ===

> target style-guide
    context: array(
        {path: 'docs/app-description.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: 'context/style.md' tag:'styling'}
        {path: 'context/tailwind.md' tag:'tailwind-rules'}
        {path: '.editorconfig' tag:'editor-config'}
        {path: 'styles/globals.css' tag:'tailwind-theme'}
    )
    out: 'docs/style-guide.md'
    ===
    Generate a guide showing how to use the `tailwind-theme`. Include examples using it in HTML
    fenced code blocks.
    ===


> target types
    context: array(
        {path: 'docs/app-description.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: '.editorconfig' tag:'editor-config'}
    )
    out: 'lib/schema.ts'
    ===
    Generate TypeScript types for common entities shared by the app.
    ===



> target main-layout-description
    context: array(
        {path: 'docs/app-description.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: 'lib/schema.ts' tag: 'types'}
        {path: 'context/style.md' tag:'styling'}
        {path: 'docs/style-guide.md' tag:'style-guide'}
        {path: '.editorconfig' tag:'editor-config'}
    )
    out: 'docs/main-layout.md'
    ===
    Generate a description of the main layout component of the app. The main layout should
    include a navigation bar at the top of the screen that collapses on mobile when an 
    expand button.

    Include a list of all navigation links.
    
    The main nav should include an account switcher.

    The main layout should accept a single children prop that will render the screens / pages of
    the app.
    ===

> target main-layout
    context: array(
        {path: 'docs/app-description.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: 'lib/schema.ts' tag: 'types'}
        {path: 'context/style.md' tag:'styling'}
        {path: 'docs/style-guide.md' tag:'style-guide'}
        {path: 'docs/main-layout.md' tag:'main-layout'}
        {path: '.editorconfig' tag:'editor-config'}
    )
    out: 'components/MainLayout.tsx'
    ===
    Generate a MainLayout component based on the `main-layout` tag.

    The MainLayout should be exported by the name `MainLayout` => `export function MainLayout({children}:MainLayoutProps)`

    The MainLayout should include collapsible navigation.
    ===


> target section-components
    context: array(
        {path: 'docs/app-description.md' tag:'app-description'}
        {path: 'context/coding-rules.md' tag:'coding-rules'}
        {path: 'context/style.md' tag:'styling'}
        {path: 'docs/style-guide.md' tag:'style-guide'}
        {path: 'docs/main-layout.md' tag:'main-layout'}
        {path: '.editorconfig' tag:'editor-config'}
        'context/sections.convo'
    )
    component: true
    in: 'context/section-images/*.png'
    out: 'components/sections/*.tsx'
    ---
    Generate a React section component based on the image
    ---
